# AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæ¨¡å—

## æ¦‚è¿°

AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæ¨¡å—æ˜¯ä¸€ä¸ªåŸºäº AutoGen 0.5.7 çš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ†æç”¨æˆ·éœ€æ±‚å¹¶ç”Ÿæˆä¸“ä¸šçš„æµ‹è¯•ç”¨ä¾‹ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¤– å¤šæ™ºèƒ½ä½“åä½œ
- **éœ€æ±‚åˆ†ææ™ºèƒ½ä½“**: åˆ†æç”¨æˆ·ä¸Šä¼ çš„å†…å®¹ï¼Œæå–æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚
- **æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæ™ºèƒ½ä½“**: åŸºäºéœ€æ±‚ç”Ÿæˆä¸“ä¸šçš„æµ‹è¯•ç”¨ä¾‹
- **ç”¨æˆ·åé¦ˆå¤„ç†æ™ºèƒ½ä½“**: æ ¹æ®ç”¨æˆ·åé¦ˆä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹

### ğŸ“ å¤šç§è¾“å…¥æ–¹å¼
- æ–‡æœ¬æè¿°è¾“å…¥
- æ–‡ä»¶ä¸Šä¼ æ”¯æŒï¼ˆæ–‡æ¡£ã€å›¾ç‰‡ç­‰ï¼‰
- æ··åˆè¾“å…¥æ¨¡å¼

### ğŸ”„ äº¤äº’å¼ä¼˜åŒ–
- æœ€å¤š3è½®äº¤äº’ä¼˜åŒ–
- å®æ—¶åé¦ˆå¤„ç†
- æ™ºèƒ½ä½“å¯¹è¯å†å²è®°å½•

### ğŸ¨ ç‚«é…·ç•Œé¢è®¾è®¡
- Gemini é£æ ¼çš„ç°ä»£åŒ–UI
- æ—¶é—´è½´å±•ç¤ºæ™ºèƒ½ä½“å¯¹è¯
- æŠ˜å å¼æ¶ˆæ¯å±•ç¤º
- æµå¼å“åº”å®æ—¶æ˜¾ç¤º

## æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **FastAPI**: Webæ¡†æ¶
- **AutoGen 0.5.7**: å¤šæ™ºèƒ½ä½“æ¡†æ¶
- **SSE (Server-Sent Events)**: æµå¼å“åº”
- **Pydantic**: æ•°æ®éªŒè¯
- **Loguru**: æ—¥å¿—ç®¡ç†

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18**: å‰ç«¯æ¡†æ¶
- **Ant Design**: UIç»„ä»¶åº“
- **TypeScript**: ç±»å‹å®‰å…¨
- **React Markdown**: Markdownæ¸²æŸ“
- **Vite**: æ„å»ºå·¥å…·

## ä¸šåŠ¡æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·ä¸Šä¼ å†…å®¹] --> B[éœ€æ±‚åˆ†ææ™ºèƒ½ä½“]
    B --> C[æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæ™ºèƒ½ä½“]
    C --> D[å±•ç¤ºæµ‹è¯•ç”¨ä¾‹]
    D --> E{ç”¨æˆ·æ»¡æ„?}
    E -->|æ˜¯| F[å®Œæˆ]
    E -->|å¦| G[ç”¨æˆ·åé¦ˆ]
    G --> H[åé¦ˆå¤„ç†æ™ºèƒ½ä½“]
    H --> I{è¾¾åˆ°æœ€å¤§è½®æ¬¡?}
    I -->|æ˜¯| F
    I -->|å¦| C
```

## API æ¥å£

### æ–‡ä»¶ä¸Šä¼ 
```http
POST /api/testcase/upload
Content-Type: multipart/form-data

files: File[]
text_content?: string
conversation_id?: string
```

### æµå¼ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
```http
POST /api/testcase/generate/stream
Content-Type: application/json

{
  "conversation_id": "string",
  "files": [FileUpload],
  "text_content": "string",
  "user_feedback": "string",
  "round_number": 1
}
```

### æäº¤ç”¨æˆ·åé¦ˆ
```http
POST /api/testcase/feedback
Content-Type: application/json

{
  "conversation_id": "string",
  "feedback": "string",
  "round_number": 2
}
```

## æ™ºèƒ½ä½“é…ç½®

### éœ€æ±‚åˆ†ææ™ºèƒ½ä½“
- **è§’è‰²**: èµ„æ·±è½¯ä»¶éœ€æ±‚åˆ†æå¸ˆ
- **èŒè´£**: åˆ†æç”¨æˆ·å†…å®¹ï¼Œæå–åŠŸèƒ½éœ€æ±‚
- **è¾“å‡º**: ç»“æ„åŒ–çš„éœ€æ±‚æè¿°

### æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæ™ºèƒ½ä½“
- **è§’è‰²**: èµ„æ·±è½¯ä»¶æµ‹è¯•æ¶æ„å¸ˆ
- **èŒè´£**: åŸºäºéœ€æ±‚ç”Ÿæˆä¸“ä¸šæµ‹è¯•ç”¨ä¾‹
- **è¾“å‡º**: Markdownæ ¼å¼çš„æµ‹è¯•ç”¨ä¾‹è¡¨æ ¼

### åé¦ˆå¤„ç†æ™ºèƒ½ä½“
- **è§’è‰²**: æµ‹è¯•ä¸»ç®¡
- **èŒè´£**: æ ¹æ®ç”¨æˆ·åé¦ˆä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹
- **è¾“å‡º**: æ”¹è¿›åçš„æµ‹è¯•ç”¨ä¾‹

## ä½¿ç”¨æŒ‡å—

### 1. å¯åŠ¨æœåŠ¡

**åç«¯å¯åŠ¨**:
```bash
# å®‰è£…ä¾èµ–
poetry install

# å¯åŠ¨åç«¯æœåŠ¡
poetry run python main.py
```

**å‰ç«¯å¯åŠ¨**:
```bash
cd frontend
npm install
npm run dev
```

### 2. ä½¿ç”¨æµç¨‹

1. **è¾“å…¥éœ€æ±‚**: åœ¨å·¦ä¾§è¾“å…¥æ¡†ä¸­æè¿°åŠŸèƒ½éœ€æ±‚æˆ–ä¸Šä¼ ç›¸å…³æ–‡ä»¶
2. **ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹**: ç‚¹å‡»"å¼€å§‹ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹"æŒ‰é’®
3. **æŸ¥çœ‹ç»“æœ**: åœ¨å³ä¾§æ—¶é—´è½´ä¸­æŸ¥çœ‹æ™ºèƒ½ä½“çš„åˆ†æå’Œç”Ÿæˆè¿‡ç¨‹
4. **æä¾›åé¦ˆ**: å¦‚æœéœ€è¦ä¼˜åŒ–ï¼Œåœ¨åé¦ˆæ¡†ä¸­è¾“å…¥ä¿®æ”¹æ„è§
5. **å®Œæˆ**: ç»è¿‡æœ€å¤š3è½®äº¤äº’åå®Œæˆæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ

### 3. ç•Œé¢åŠŸèƒ½

- **æ–‡ä»¶ä¸Šä¼ åŒº**: æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œæœ€å¤š5ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªä¸è¶…è¿‡10MB
- **æ™ºèƒ½ä½“æ¶ˆæ¯**: å¯å±•å¼€/æŠ˜å æŸ¥çœ‹è¯¦ç»†å†…å®¹ï¼Œæ”¯æŒå¤åˆ¶
- **è¿›åº¦æ­¥éª¤**: æ˜¾ç¤ºå½“å‰ç”Ÿæˆè¿›åº¦
- **æ—¶é—´è½´**: æŒ‰æ—¶é—´é¡ºåºå±•ç¤ºæ‰€æœ‰æ™ºèƒ½ä½“äº¤äº’

## é…ç½®è¯´æ˜

### åç«¯é…ç½®
åœ¨ `backend/conf/settings.yaml` ä¸­é…ç½®ï¼š

```yaml
test:
  aimodel:
    model: "deepseek-chat"
    base_url: "https://api.deepseek.com/v1"
    api_key: "your-api-key-here"

  autogen:
    max_agents: 100
    cleanup_interval: 3600
    agent_ttl: 7200
```

### å‰ç«¯é…ç½®
åœ¨ `frontend/vite.config.ts` ä¸­é…ç½®ä»£ç†ï¼š

```typescript
proxy: {
  '/api': {
    target: 'http://localhost:8000',
    changeOrigin: true,
  }
}
```

## æ‰©å±•åŠŸèƒ½

### è‡ªå®šä¹‰æ™ºèƒ½ä½“
å¯ä»¥é€šè¿‡ç»§æ‰¿ `RoutedAgent` ç±»æ¥åˆ›å»ºè‡ªå®šä¹‰æ™ºèƒ½ä½“ï¼š

```python
@type_subscription(topic_type="custom_topic")
class CustomAgent(RoutedAgent):
    def __init__(self, conversation_id: str, service):
        super().__init__(description="è‡ªå®šä¹‰æ™ºèƒ½ä½“")
        # åˆå§‹åŒ–é€»è¾‘

    @message_handler
    async def handle_message(self, message, ctx: MessageContext):
        # å¤„ç†é€»è¾‘
        pass
```

### æ·»åŠ æ–°çš„è¾“å…¥ç±»å‹
å¯ä»¥æ‰©å±• `FileUpload` æ¨¡å‹æ¥æ”¯æŒæ›´å¤šæ–‡ä»¶ç±»å‹ï¼š

```python
class ExtendedFileUpload(FileUpload):
    metadata: Optional[dict] = None
    processing_options: Optional[dict] = None
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ™ºèƒ½ä½“æ— å“åº”**
   - æ£€æŸ¥ OpenAI API é…ç½®
   - æŸ¥çœ‹åç«¯æ—¥å¿—

2. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶
   - ç¡®è®¤æ–‡ä»¶ç±»å‹æ”¯æŒ

3. **å‰ç«¯è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ä»£ç†é…ç½®
   - ç¡®è®¤åç«¯æœåŠ¡è¿è¡ŒçŠ¶æ€

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f backend.log

# æŸ¥çœ‹å‰ç«¯æ§åˆ¶å°
# åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹
```

## æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥
- å®ç°æ™ºèƒ½ä½“ç¼“å­˜æœºåˆ¶
- ä¼˜åŒ–æ–‡ä»¶ä¸Šä¼ å¤„ç†
- æ·»åŠ è¯·æ±‚é™æµ

## å®‰å…¨è€ƒè™‘

- æ–‡ä»¶ä¸Šä¼ å®‰å…¨æ£€æŸ¥
- API è®¿é—®é¢‘ç‡é™åˆ¶
- æ•æ„Ÿä¿¡æ¯è¿‡æ»¤
- ç”¨æˆ·è¾“å…¥éªŒè¯

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-XX)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒåŸºç¡€çš„æµ‹è¯•ç”¨ä¾‹ç”ŸæˆåŠŸèƒ½
- å®ç°å¤šæ™ºèƒ½ä½“åä½œ
- æä¾›ç‚«é…·çš„å‰ç«¯ç•Œé¢
